<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arbetsplan - Medborgarskolan</title>
    
    <!-- Importera html2pdf.js f칬r att kunna spara som PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #525659;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        .page {
            background-color: white;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm 20mm;
            box-sizing: border-box;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 40px;
        }

        .left-info {
            font-size: 11px;
            line-height: 1.3;
        }

        .logo-img {
            width: 170px;
            height: auto;
            margin-bottom: 20px;
            display: block;
        }

        .right-info {
            text-align: right;
        }

        .right-info h1 {
            margin: 0;
            font-size: 26px;
            font-weight: bold;
        }

        .right-info p {
            margin: 5px 0 0 0;
            font-size: 10px;
        }

        .main-title {
            font-size: 22px;
            font-weight: normal;
            margin-bottom: 10px;
        }

        hr {
            border: none;
            border-top: 1px solid #000;
            margin-bottom: 25px;
        }

        .intro-text {
            font-size: 12px;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .intro-text p {
            margin: 0 0 5px 0;
        }

        .form-group {
            background-color: #fafafa;
            margin-bottom: 15px;
            padding: 2px;
        }

        .form-group label {
            display: block;
            font-size: 12px;
            padding: 8px 5px 5px 5px;
        }

        .form-group textarea {
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #777;
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 12px;
            resize: vertical;
            min-height: 70px;
            background-color: white;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #1a2a6c;
        }

        .controls {
            margin-bottom: 20px;
            position: sticky;
            top: 20px;
            z-index: 100;
            width: 210mm;
            max-width: 100%;
        }

        .btn-download {
            background-color: #1a2a6c;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: background 0.3s;
        }

        .btn-download:hover {
            background-color: #101a45;
        }

        .html2pdf__page-break { page-break-before: always; }
    </style>
</head>
<body>

    <div class="controls">
        <button class="btn-download" onclick="generatePDF()">游 Spara som PDF</button>
    </div>

    <div class="page" id="document-content">
        
        <div class="header-container">
            <div class="left-info">
                <img 
                    src="logo-medborgarskolan.c3013527.svg" 
                    crossorigin="anonymous" 
                    class="logo-img" 
                    alt="Medborgarskolan">
                
                Medborgarskolan Syd<br>
                V칛stergatan 17<br>
                24131 ESL칐V<br>
                region.syd@medborgarskolan.se<br>
                www.medborgarskolan.se
            </div>
            <div class="right-info">
                <h1>Arbetsplan</h1>
                <p id="print-date"></p>
            </div>
        </div>

        <h2 class="main-title">77263 - Designa bilder och grafik</h2>
        <hr>

        <div class="intro-text">
            <p>Planering av gruppens studier.</p>
            <p>S친 kallad annan folkbildning 칛r en del av Medborgarskolans folkbildningsverksamhet som kan genomf칬ras i friare och flexiblare former. Det finns h칛r m칬jlighet att pr칬va nya id칠er och utveckla nyskapande folkbildningsverksamhet. Annan folkbildningsverksamhet kan till exempel vara en workshop, prova-p친-dagar, barnverksamhet (barn fr친n sex 친r) eller helgkurser d칛r sammankomsterna kan vara l칛ngre och genomf칬ras t칛tare 칛n i studiecirklar.</p>
            <p>Verksamheten ska vara styrd av deltagarnas 칬nskem친l om inneh친ll och uppl칛gg.</p>
            <p>Som st칬d f칬r er grupps utveckling och l칛rande ska det finnas en dokumenterad plan f칬r verksamhetens genomf칬rande och f칬r det studiematerial som ska anv칛ndas (F칬rordning (2015:218) om statsbidrag f칬r folkbildningen, 12춶).</p>
            <p>Ledaren arbetar fram arbetsplanen tillsammans med deltagarna och Medborgarskolan ansvarar d칛refter f칬r att godk칛nna arbetsplanen.</p>
            <p>Fyll i arbetsplanen nedan efter verksamhetens f칬rsta sammankomst.</p>
        </div>

        <div class="form-group">
            <label>1. Beskriv era m친l med verksamheten. (Vad vill ni l칛ra er? Vad 칛r syftet med verksamheten?) (obligatorisk uppgift)</label>
            <textarea rows="3"></textarea>
        </div>

        <div class="form-group">
            <label>2. Ber칛tta hur ni ska g칬ra f칬r att n친 era m친l. (Hur ska ni g칬ra f칬r att l칛ra er?) (obligatorisk uppgift)</label>
            <textarea rows="3"></textarea>
        </div>

        <div class="form-group">
            <label>3. Beskriv det studiematerial/de kunskapsk칛llor ni ev kommer att anv칛nda. (Ange namn p친 litteratur, digitala medier, annat studiematerial och/eller beskrivning av ledarens och/eller deltagarnas kunskaper. Materialet ska vid behov vara kontrollerbart.) (obligatorisk uppgift)</label>
            <textarea rows="3"></textarea>
        </div>

        <div class="form-group">
            <label>4. Ber칛tta vilka resurser och/eller vilket st칬d ni har kommit 칬verens med Medborgarskolan om att verksamheten beh칬ver f칬r att n친 era m친l. (Tex utbildning, lokal, pedagogiskt/administrativt st칬d, kursmaterial, arbetsmaterial, marknadsf칬ring). (obligatorisk uppgift)</label>
            <textarea rows="3"></textarea>
        </div>

    </div>

    <script>
        function generatePDF() {
            const element = document.getElementById('document-content');
            const btn = document.querySelector('.btn-download');

            if (!element || !btn) {
                return;
            }

            const replacements = [];
            const textareas = element.querySelectorAll('textarea');

            textareas.forEach((textarea) => {
                const computed = window.getComputedStyle(textarea);
                const staticBlock = document.createElement('div');

                staticBlock.textContent = textarea.value || '';
                staticBlock.style.width = '100%';
                staticBlock.style.boxSizing = 'border-box';
                staticBlock.style.border = computed.border;
                staticBlock.style.padding = computed.padding;
                staticBlock.style.fontFamily = computed.fontFamily;
                staticBlock.style.fontSize = computed.fontSize;
                staticBlock.style.lineHeight = computed.lineHeight;
                staticBlock.style.minHeight = computed.minHeight;
                staticBlock.style.backgroundColor = computed.backgroundColor;
                staticBlock.style.color = computed.color;
                staticBlock.style.whiteSpace = 'pre-wrap';
                staticBlock.style.wordBreak = 'break-word';

                textarea.style.display = 'none';
                textarea.parentNode.insertBefore(staticBlock, textarea.nextSibling);
                replacements.push({ textarea, staticBlock });
            });
            
            const opt = {
                margin:       0,
                filename:     'Arbetsplan_77263.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, useCORS: true, allowTaint: true }, 
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            const originalText = btn.innerText;
            btn.innerText = "Genererar PDF...";
            btn.disabled = true;

            const restoreFormState = () => {
                replacements.forEach(({ textarea, staticBlock }) => {
                    if (staticBlock.parentNode) {
                        staticBlock.parentNode.removeChild(staticBlock);
                    }
                    textarea.style.display = '';
                });
            };

            html2pdf().set(opt).from(element).save().then(() => {
                restoreFormState();
                btn.innerText = originalText;
                btn.disabled = false;
            }).catch(() => {
                restoreFormState();
                btn.innerText = originalText;
                btn.disabled = false;
                alert("Kunde inte skapa PDF. Kontrollera internetanslutning och f칬rs칬k igen.");
            });
        }

        (function setPrintDate() {
            const dateElement = document.getElementById('print-date');
            if (!dateElement) {
                return;
            }
            const today = new Date().toISOString().slice(0, 10);
            dateElement.textContent = "Utskriftsdatum " + today;
        })();
    </script>
</body>
</html>
